import { useState } from "react";
import { Home as HomeIcon, Zap, DollarSign, Droplets, Clock, Recycle, Users, ChevronDown } from "lucide-react";
import { Button } from "@/components/ui/button";
import { Card } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";

import algiftaImg from "@assets/algifta_1764949288210.jpeg";
import kamalImg from "@assets/kamal_1764949288211.jpeg";
import modenImg from "@assets/moden_1764949288212.jpeg";
import jekiImg from "@assets/jeki_1764949288212.jpeg";
import faiqImg from "@assets/faiq_1764949288213.jpeg";
import wapexImg from "@assets/wapex_1764949288213.jpeg";

const rules = [
  { number: 1, title: "Hemat Energi", description: "Hemat penggunaan listrik dan air untuk efisiensi bersama", icon: Zap },
  { number: 2, title: "Hemat Biaya", description: "Kelola keuangan operasional dengan bijak dan transparan", icon: DollarSign },
  { number: 3, title: "Kebersihan", description: "Jaga kebersihan ruang bersama dengan gotong royong", icon: Droplets },
  { number: 4, title: "Waktu & Tenaga", description: "Hormati waktu dan tenaga setiap penghuni lainnya", icon: Clock },
  { number: 5, title: "Sumber Daya", description: "Manfaatkan sumber daya secara optimal dan berkelanjutan", icon: Recycle },
  { number: 6, title: "Gotong Royong", description: "Bangun kesadaran kolektif untuk kemajuan bersama", icon: Users },
];

const residents = [
  { name: "Wapex", image: wapexImg },
  { name: "Faiq", image: faiqImg },
  { name: "Jeckie", image: jekiImg },
  { name: "Moden", image: modenImg },
  { name: "Kamal", image: kamalImg },
  { name: "Algifta", image: algiftaImg },
];

function Navigation() {
  const scrollToSection = (id: string) => {
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: "smooth" });
    }
  };

  return (
    <nav className="fixed top-0 w-full bg-background/95 backdrop-blur-lg z-50 border-b border-white/10" data-testid="nav-main">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div className="flex items-center justify-between h-16">
          <div className="flex items-center gap-2">
            <HomeIcon className="w-5 h-5 text-primary" />
            <span className="text-lg font-bold gradient-text" data-testid="text-logo">Baiti Jannati</span>
          </div>
          <div className="hidden md:flex items-center gap-8">
            <button 
              onClick={() => scrollToSection("visi")} 
              className="text-sm text-muted-foreground hover:text-foreground transition-colors"
              data-testid="link-visi"
            >
              Visi & Misi
            </button>
            <button 
              onClick={() => scrollToSection("pembayaran")} 
              className="text-sm text-muted-foreground hover:text-foreground transition-colors"
              data-testid="link-pembayaran"
            >
              Pembayaran
            </button>
            <button 
              onClick={() => scrollToSection("penghuni")} 
              className="text-sm text-muted-foreground hover:text-foreground transition-colors"
              data-testid="link-penghuni"
            >
              Penghuni
            </button>
            <button 
              onClick={() => scrollToSection("filosofi")} 
              className="text-sm text-muted-foreground hover:text-foreground transition-colors"
              data-testid="link-filosofi"
            >
              Filosofi
            </button>
            <button 
              onClick={() => scrollToSection("motivasi")} 
              className="text-sm text-muted-foreground hover:text-foreground transition-colors"
              data-testid="link-motivasi"
            >
              Motivasi
            </button>
          </div>
        </div>
      </div>
    </nav>
  );
}

function HeroSection() {
  const scrollToSection = (id: string) => {
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: "smooth" });
    }
  };

  return (
    <section className="relative min-h-screen flex items-center justify-center hero-gradient pt-16 overflow-hidden" data-testid="section-hero">
      <div className="relative z-10 text-center px-4 max-w-4xl mx-auto">
        <h1 className="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-extrabold mb-6 gradient-text leading-tight" data-testid="text-hero-title">
          Kontrakan Baiti Jannati
        </h1>
        <p className="text-lg sm:text-xl text-muted-foreground mb-8 max-w-2xl mx-auto" data-testid="text-hero-subtitle">
          Rumah Impian Bersama, Membangun Masa Depan Bersama
        </p>
        <Button 
          onClick={() => scrollToSection("visi")}
          className="gradient-button text-white font-semibold px-8 py-6 rounded-full text-base"
          data-testid="button-cta"
        >
          Jelajahi Selengkapnya
          <ChevronDown className="ml-2 w-5 h-5" />
        </Button>
      </div>

      <div className="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce">
        <ChevronDown className="w-6 h-6 text-muted-foreground" />
      </div>
    </section>
  );
}

function VisiMisiSection() {
  return (
    <section id="visi" className="py-20 px-4 visi-gradient" data-testid="section-visi">
      <div className="max-w-6xl mx-auto">
        <h2 className="text-3xl sm:text-4xl font-bold text-center mb-12 text-foreground" data-testid="text-visi-title">
          Visi & Misi
        </h2>
        
        <div className="glass-card rounded-2xl p-8 sm:p-12 max-w-4xl mx-auto text-center mb-12">
          <p className="text-2xl sm:text-3xl font-semibold italic text-primary mb-4" data-testid="text-visi-quote">
            "Ngone awak dewe dinggo ngupoyo"
          </p>
          <p className="text-muted-foreground text-base sm:text-lg" data-testid="text-visi-subtitle">
            Kita bersama-sama untuk maju, berkembang, dan meraih kesuksesan bersama
          </p>
        </div>

        <h3 className="text-xl sm:text-2xl font-semibold text-center mb-8 text-foreground">
          Aturan yang Berlaku
        </h3>

        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {rules.map((rule) => (
            <Card 
              key={rule.number} 
              className="glass-card border-l-4 border-l-primary p-6 card-hover cursor-pointer rounded-md"
              data-testid={`card-rule-${rule.number}`}
            >
              <div className="flex items-start gap-4">
                <div className="p-2 rounded-md bg-primary/10">
                  <rule.icon className="w-5 h-5 text-primary" />
                </div>
                <div className="flex-1">
                  <h4 className="text-lg font-semibold text-primary mb-2">
                    {rule.number}. {rule.title}
                  </h4>
                  <p className="text-sm text-muted-foreground">
                    {rule.description}
                  </p>
                </div>
              </div>
            </Card>
          ))}
        </div>
      </div>
    </section>
  );
}

function PembayaranSection() {
  return (
    <section id="pembayaran" className="py-20 px-4 pembayaran-gradient" data-testid="section-pembayaran">
      <div className="max-w-4xl mx-auto">
        <h2 className="text-3xl sm:text-4xl font-bold text-center mb-12 text-foreground" data-testid="text-pembayaran-title">
          Sistem Pembayaran
        </h2>

        <Card className="glass-card rounded-2xl p-6 sm:p-8 mb-8" data-testid="card-payment-main">
          <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 flex-wrap">
            <div>
              <p className="text-sm text-muted-foreground mb-2">Kontrakan per Tahun:</p>
              <div className="flex items-center gap-4 flex-wrap">
                <span className="text-lg line-through text-destructive" data-testid="text-price-original">
                  Rp 18.000.000
                </span>
                <span className="text-2xl sm:text-3xl font-bold text-green-500" data-testid="text-price-discounted">
                  Rp 16.000.000
                </span>
              </div>
            </div>
            <Badge className="bg-amber-500 text-black font-semibold px-4 py-2 rounded-full" data-testid="badge-negotiated">
              Sudah Dinego
            </Badge>
          </div>
        </Card>

        <Card className="glass-card rounded-2xl p-6 sm:p-8" data-testid="card-payment-details">
          <h3 className="text-xl font-semibold text-primary mb-6">
            Per Orang untuk 6 Bulan
          </h3>
          
          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
            <div className="bg-primary/10 p-5 rounded-md border-l-4 border-l-primary">
              <p className="text-sm font-semibold text-primary mb-2">Kontrakan (6 Bulan)</p>
              <p className="text-xl font-bold text-green-500" data-testid="text-rent-amount">
                Rp 1.600.000
              </p>
            </div>
            
            <div className="bg-primary/10 p-5 rounded-md border-l-4 border-l-primary">
              <p className="text-sm font-semibold text-primary mb-2">Air + Sampah + WiFi (Per Bulan)</p>
              <p className="text-sm text-muted-foreground mb-1">Rp 20.000 × 6 bulan</p>
              <p className="text-xl font-bold text-green-500" data-testid="text-utilities-amount">
                = Rp 120.000
              </p>
            </div>
            
            <div className="bg-primary/10 p-5 rounded-md border-l-4 border-l-primary">
              <p className="text-sm font-semibold text-primary mb-2">Listrik (Per Bulan)</p>
              <p className="text-sm text-muted-foreground mb-1">Rp 10.000 × 6 bulan</p>
              <p className="text-xl font-bold text-green-500" data-testid="text-electricity-amount">
                = Rp 60.000
              </p>
            </div>
          </div>
        </Card>
      </div>
    </section>
  );
}

function PenghuniSection() {
  return (
    <section id="penghuni" className="py-20 px-4 bg-background" data-testid="section-penghuni">
      <div className="max-w-6xl mx-auto">
        <h2 className="text-3xl sm:text-4xl font-bold text-center mb-12 text-foreground" data-testid="text-penghuni-title">
          Penghuni Kontrakan
        </h2>

        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
          {residents.map((resident, index) => (
            <Card 
              key={resident.name} 
              className="glass-card overflow-hidden card-hover-dramatic rounded-md"
              data-testid={`card-resident-${index}`}
            >
              <div className="h-48 sm:h-56 bg-gradient-to-br from-primary to-accent overflow-hidden">
                <img 
                  src={resident.image} 
                  alt={resident.name}
                  className="w-full h-full object-cover"
                />
              </div>
              <div className="p-5 sm:p-6">
                <h3 className="text-xl font-bold text-primary mb-4" data-testid={`text-resident-name-${index}`}>
                  {resident.name}
                </h3>
                <div className="space-y-3">
                  <div className="flex justify-between items-center text-sm">
                    <span className="text-muted-foreground">Kontrakan 6 bulan:</span>
                    <span className="font-semibold text-foreground">Rp 1.600.000</span>
                  </div>
                  <div className="flex justify-between items-center text-sm">
                    <span className="text-muted-foreground">Air + Sampah + WiFi:</span>
                    <span className="font-semibold text-foreground">Rp 20.000</span>
                  </div>
                  <div className="flex justify-between items-center text-sm">
                    <span className="text-muted-foreground">Listrik:</span>
                    <span className="font-semibold text-foreground">Rp 10.000</span>
                  </div>
                </div>
              </div>
            </Card>
          ))}
        </div>
      </div>
    </section>
  );
}

function FilosofiSection() {
  const [showAnswer, setShowAnswer] = useState(false);

  return (
    <section id="filosofi" className="py-20 px-4 filosofi-gradient" data-testid="section-filosofi">
      <div className="max-w-3xl mx-auto">
        <h2 className="text-3xl sm:text-4xl font-bold text-center mb-12 text-foreground" data-testid="text-filosofi-title">
          Filosofi Nama
        </h2>

        <Card 
          className="glass-card filosofi-border rounded-2xl p-8 sm:p-12 text-center cursor-pointer transition-all duration-300 hover:bg-white/[0.08]"
          onClick={() => setShowAnswer(!showAnswer)}
          data-testid="card-filosofi"
        >
          <h3 className="text-2xl sm:text-3xl font-bold filosofi-accent mb-4" data-testid="text-filosofi-question">
            Apa arti "Baiti Jannati"?
          </h3>
          <p className="text-muted-foreground mb-4" data-testid="text-filosofi-hint">
            (Klik untuk melihat jawaban)
          </p>

          <div 
            className={`bg-primary/20 rounded-md overflow-hidden transition-all duration-300 ${
              showAnswer ? "max-h-96 opacity-100 p-6 sm:p-8 mt-6" : "max-h-0 opacity-0 p-0 mt-0"
            }`}
            data-testid="div-filosofi-answer"
          >
            <p className="text-xl sm:text-2xl font-bold filosofi-accent mb-4" data-testid="text-filosofi-answer">
              "Rumahku adalah Surgaku"
            </p>
            <p className="text-muted-foreground text-sm sm:text-base" data-testid="text-filosofi-meaning">
              Baiti Jannati berasal dari bahasa Arab yang berarti "Rumahku adalah Surgaku". 
              Filosofi ini mengajarkan bahwa rumah adalah tempat ternyaman dan terindah, 
              tempat kita membangun kebahagiaan dan kedamaian bersama keluarga dan orang-orang tercinta.
            </p>
          </div>
        </Card>
      </div>
    </section>
  );
}

function MotivasiSection() {
  return (
    <section id="motivasi" className="py-20 px-4 motivasi-gradient" data-testid="section-motivasi">
      <div className="max-w-4xl mx-auto text-center">
        <h2 className="text-3xl sm:text-4xl font-bold mb-12 text-foreground" data-testid="text-motivasi-title">
          Motivasi
        </h2>

        <p className="text-3xl sm:text-4xl md:text-5xl font-extrabold italic gold-accent mb-6" data-testid="text-motivasi-quote">
          "Qolil wa Dawim"
        </p>
        <p className="text-lg sm:text-xl text-muted-foreground mb-8 max-w-2xl mx-auto leading-relaxed" data-testid="text-motivasi-subtitle">
          Sedikit tetapi Istiqomah. Lebih baik melakukan hal kecil secara konsisten 
          daripada hal besar yang tidak berkelanjutan.
        </p>

        <Card className="glass-card rounded-2xl p-8 sm:p-10 text-left" data-testid="card-motivasi">
          <p className="text-lg sm:text-xl font-bold gold-accent mb-4">
            Filosofi Penghuni
          </p>
          <p className="text-muted-foreground text-sm sm:text-base leading-relaxed">
            Di Kontrakan Baiti Jannati, kami percaya bahwa kesuksesan dibangun dari 
            langkah-langkah kecil yang konsisten. Setiap penghuni adalah keluarga, 
            setiap langkah adalah kemajuan, dan setiap hari adalah kesempatan baru 
            untuk tumbuh bersama. Mari wujudkan impian kita dengan istiqomah dan 
            semangat gotong royong!
          </p>
        </Card>
      </div>
    </section>
  );
}

function Footer() {
  return (
    <footer className="py-8 px-4 bg-background/80 border-t border-white/10" data-testid="footer">
      <div className="max-w-6xl mx-auto text-center">
        <p className="text-muted-foreground text-sm" data-testid="text-footer-copyright">
          © 2024 Kontrakan Baiti Jannati. Rumah Impian Bersama.
        </p>
      </div>
    </footer>
  );
}

export default function Home() {
  return (
    <div className="min-h-screen bg-background">
      <Navigation />
      <HeroSection />
      <VisiMisiSection />
      <PembayaranSection />
      <PenghuniSection />
      <FilosofiSection />
      <MotivasiSection />
      <Footer />
    </div>
  );
}